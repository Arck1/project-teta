{% extends 'wrapper.html' %}

{% block head %}
    <title>presentation</title>
    {#    <!--Load the AJAX API-->#}
    {#    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>#}
    {#    <script type="text/javascript">#}
    {#        stats = "{{ presentation.stat }}";#}
    {##}
    {#     google.charts.load('current', {packages: ['corechart']});#}
    {#        google.charts.setOnLoadCallback(drawMultSeries);#}
    {##}
    {#     function drawMultSeries() {#}
    {#      var data = new google.visualization.DataTable();#}
    {#      data.addColumn('number', 'Slide Number');#}
    {#      data.addColumn('number', 'time');#}
    {#      vals = JSON.parse(stats);#}
    {#      console.log(vals);#}
    {#      dat = [];#}
    {#      for (var i = 1; i <= vals.length; i++) {#}
    {#            dat[i - 1] = [i, vals[i - 1]];#}
    {#        }#}
    {#      data.addRows(dat);#}
    {##}
    {#      var options = {#}
    {#        title: 'Slide view statistic',#}
    {#        vAxis: {#}
    {#          title: 'Time'#}
    {#        },#}
    {#          legend: 'none',#}
    {#          hAxis: { title: 'Slide number'},#}
    {#          colors: ['#1c6679'],#}
    {#          pointSize: 10#}
    {##}
    {#      };#}
    {#      var chart = new google.visualization.LineChart(#}
    {#        document.getElementById('chart_div'));#}
    {##}
    {#      chart.draw(data, options);#}
    {#    }#}
    {#    </script>#}
{% endblock %}

{% block content %}
    {% include 'header.html' %}



{#==============================================================================#}
        <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="all-tab" data-toggle="tab" href="#all" role="tab" aria-controls="all" aria-selected="true">All</a>
        </li>
        {% for copy in copys %}
            {% if copy.is_active %}
                <li class="nav-item">
                    <a class="nav-link" id="{{ copy.name }}-tab" data-toggle="tab" href="#{{ copy.name }}" role="tab" aria-controls="{{ copy.name }}" aria-selected="false">{{ copy.name }}</a>
                </li>
            {% endif %}
        {% endfor %}
        <li class="nav-item">
            <a class="nav-link" id="add-tab" data-toggle="tab" href="#add" role="tab" aria-controls="add" aria-selected="false">+</a>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane active" id="all" role="tabpanel" aria-labelledby="all-tab">
            <div>
                <form action="/account/presentations/{{ presentation.id }}/" method="post">
                    {% csrf_token %}
                    <input type="submit" name="status" value="{{ status }}">
                </form>
            </div>
            <div class="container d-flex align-items-center flex-column">
                <div class="align-self-center">
                    <h2>Название: {{ presentation.name }}</h2>
                    <h3><b>Описание: </b></h3>
                    <p>{{ presentation.description }}</p>
                    <h4>Прикрепленный файл: {{ presentation.pdf }}</h4>
                    <h4>Добавлен: {{ presentation.created }}</h4>
                    <h4>Изменен: {{ presentation.updated }}</h4>
                </div>
            </div>
            <div id="chart_div" class="container"></div>
        </div>
        {% for copy in copys %}
            {% if copy.is_active %}
                <div class="tab-pane" id="{{ copy.name }}" role="tabpanel" aria-labelledby="{{ copy.name }}-tab">
                    <div>
                        <form action="/account/presentations/{{ presentation.id }}/" method="post">
                            {% csrf_token %}
                            <input type="submit" name="status" value="{{ status }}">
                        </form>
                    </div>
                    <div class="container d-flex align-items-center flex-column">
                        <div class="align-self-center">
                            <h2>Название: {{ copy.name }}</h2>
                            <h3><b>Описание: </b></h3>
                            <p>{{ copy.description }}</p>
                        </div>
                    </div>
                    <div id="chart_div" class="container"></div>
                </div>
            {% endif %}
        {% endfor %}
        <div class="tab-pane" id="add" role="tabpanel" aria-labelledby="add-tab">
            <form action="/account/presentations/{{ presentation.id }}/" method="post">
                {% csrf_token %}
                <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-sm">Link Name</span>
                    </div>
                    <input id="name" type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                </div>
                <input type="url" title="link" value="{{ link }}">
                <input type="submit" name="link" value="Get link">
            </form>
        </div>
    </div>

<script>
  $(function () {
    $('#myTab li:last-child a').tab('show')
  })
</script>
    {#     <div id="chart_div" class="container"></div>#}
    {% include 'footer.html' %}
{% endblock %}
